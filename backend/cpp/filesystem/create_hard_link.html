std::filesystem::create_hard_link









From cppreference.com





[edit] Filesystem library

Classes



filesystem::path

filesystem::filesystem_error

filesystem::directory_entry

filesystem::directory_iterator

filesystem::recursive_directory_iterator  

filesystem::file_status

filesystem::space_info



filesystem::file_type

filesystem::file_time_type

filesystem::perms

filesystem::perm_options

filesystem::copy_options

filesystem::directory_options



Functions



filesystem::absolute

filesystem::canonicalfilesystem::weakly_canonical

filesystem::relativefilesystem::proximate

filesystem::copy

filesystem::copy_file

filesystem::copy_symlink

filesystem::create_directoryfilesystem::create_directories

filesystem::create_hard_link

filesystem::create_symlinkfilesystem::create_directory_symlink

filesystem::current_path

filesystem::temp_directory_path



filesystem::exists

filesystem::equivalent

filesystem::file_size

filesystem::hard_link_count

filesystem::last_write_time

filesystem::permissions

filesystem::read_symlink

filesystem::removefilesystem::remove_all

filesystem::rename

filesystem::resize_file

filesystem::space

filesystem::statusfilesystem::symlink_status



File types



filesystem::is_block_file

filesystem::is_character_file

filesystem::is_directory

filesystem::is_empty

filesystem::status_known



filesystem::is_fifo

filesystem::is_other

filesystem::is_regular_file

filesystem::is_socket

filesystem::is_symlink



[edit] 





 Defined in header <filesystem>











 void create_hard_link( const std::filesystem::path& target,

                       const std::filesystem::path& link );

 (1) 

 (since C++17) 





 void create_hard_link( const std::filesystem::path& target,

                       const std::filesystem::path& link,



                       std::error_code& ec ) noexcept;

 (2) 

 (since C++17) 







Creates a hard link link with its target set to target as if by POSIX link(): the pathname target must exist.

Once created, link and target are two logical names that refer to the same file (they are equivalent). Even if the original name target is deleted, the file continues to exist and is accessible as link.



Contents



1 Parameters

2 Return value

3 Exceptions

4 Notes

5 Example

6 See also





[edit] Parameters





 target



 -



 path of the file or directory to link to





 link



 -



 path of the new hard link





 ec



 -



 out-parameter for error reporting in the non-throwing overload



[edit] Return value

(none)



[edit] Exceptions

Any overload not marked noexcept may throw std::bad_alloc if memory allocation fails.



1) Throws std::filesystem::filesystem_error on underlying OS API errors, constructed with target as the first path argument, link as the second path argument, and the OS error code as the error code argument.

2) Sets a std::error_code& parameter to the OS API error code if an OS API call fails, and executes ec.clear() if no errors occur.

[edit] Notes

Some operating systems do not support hard links at all or support them only for regular files.

Some file systems do not support hard links regardless of the operating system: the FAT file system used on memory cards and flash drives, for example.

Some file systems limit the number of links per file.

Hardlinking to directories is typically restricted to the superuser.

Hard links typically cannot cross filesystem boundaries.

The special pathname dot (".") is a hard link to its parent directory. The special pathname dot-dot ".." is a hard link to the directory that is the parent of its parent.



[edit] Example

Run this code

#include <filesystem>

#include <fstream>

#include <iostream>

namespace fs = std::filesystem;

 

int main()

{

    fs::create_directories("sandbox/subdir");

    std::ofstream("sandbox/a").put('a'); // create regular file

    fs::create_hard_link("sandbox/a", "sandbox/b");

    fs::remove("sandbox/a");

    // read from the original file via surviving hard link

    char c = std::ifstream("sandbox/b").get();

    std::cout << c << '\n';

    fs::remove_all("sandbox");

}

Output:



a



[edit] See also





  create_symlinkcreate_directory_symlink(C++17)(C++17)



  creates a symbolic link  (function) [edit]





  hard_link_count(C++17)



  returns the number of hard links referring to the specific file  (function) [edit]









 





                    