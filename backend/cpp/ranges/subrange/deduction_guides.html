deduction guides for std::ranges::subrange









From cppreference.com





[edit] Ranges library



Range access



begin

cbegin 

end

cend



rbegin

crbegin 

rend

crend



size

ssize 

data

cdata



reserve_hint(C++26)  

empty













Range conversions

std::from_range_tstd::from_range(C++23)(C++23)    

to(C++23)







Dangling iterator handling

dangling

borrowed_iterator_t

borrowed_subrange_t











Range primitives



range_size_trange_difference_trange_value_t

elements_of(C++23)    



iterator_tconst_iterator_tsentinel_tconst_sentinel_t(C++23)(C++23)  



range_reference_trange_const_reference_trange_rvalue_reference_trange_common_reference_t(C++23)







Range concepts



range

borrowed_range  

common_range



sized_range

viewable_range  

view



input_range

output_range

forward_range  



bidirectional_range  

random_access_range

contiguous_range



approximately_sized_range(C++26)

constant_range(C++23)











Views



view_interface  



subrange















Range factories



empty_viewviews::empty  



single_viewviews::single  



basic_istream_viewviews::istream  



iota_viewviews::iota  



repeat_viewviews::repeat(C++23)(C++23)







Range adaptors



views::all_tviews::all

as_rvalue_viewviews::as_rvalue(C++23)(C++23)  

filter_viewviews::filter

transform_viewviews::transform

take_viewviews::take

take_while_viewviews::take_while

common_viewviews::common

views::counted

to_input_viewviews::to_input(C++26)(C++26)



ref_view

drop_viewviews::drop

drop_while_viewviews::drop_while

lazy_split_viewviews::lazy_split

split_viewviews::split

join_viewviews::join

join_with_viewviews::join_with(C++23)(C++23)  

concat_viewviews::concat(C++26)(C++26)

cache_latest_viewviews::cache_latest(C++26)(C++26)  



owning_view

reverse_viewviews::reverse

as_const_viewviews::as_const(C++23)(C++23)

elements_viewviews::elements

keys_viewviews::keys

values_viewviews::values

enumerate_viewviews::enumerate(C++23)(C++23)

zip_viewviews::zip(C++23)(C++23)

zip_transform_viewviews::zip_transform(C++23)(C++23)  



adjacent_viewviews::adjacent(C++23)(C++23)

views::pairwise(C++23)

adjacent_transform_viewviews::adjacent_transform(C++23)(C++23)

views::pairwise_transform(C++23)

chunk_viewviews::chunk(C++23)(C++23)

slide_viewviews::slide(C++23)(C++23)

chunk_by_viewviews::chunk_by(C++23)(C++23)

stride_viewviews::stride(C++23)(C++23)

cartesian_product_viewviews::cartesian_product(C++23)(C++23)













Range generators

std::generator(C++23)    



Range adaptor closure objects

range_adaptor_closure(C++23)    



Range adaptor objects











Helper items



copyable-boxmovable-box(until C++23)  (C++23)



simple-view

non-propagating-cache













[edit] std::ranges::subrange

Member functions

subrange::subrange

subrange::operator PairLike

Observers

subrange::begin

subrange::end

subrange::empty

subrange::size

Iterator operations

subrange::advance

subrange::next

subrange::prev

Deduction guides

Non-member functions

get(std::ranges::subrange)

Helper types

subrange_kind

tuple_size<std::ranges::subrange>

tuple_element<std::ranges::subrange>

[edit] 





 Defined in header <ranges>











 template< std::input_or_output_iterator I, std::sentinel_for<I> S >

subrange(I, S) -> subrange<I, S>;

 (1) 

 (since C++20) 





 template< std::input_or_output_iterator I, std::sentinel_for<I> S >

subrange(I, S, /*make-unsigned-like-t*/<std::iter_difference_t<I>>) ->



    subrange<I, S, ranges::subrange_kind::sized>;

 (2) 

 (since C++20) 





 template< ranges::borrowed_range<R> >

subrange(R&&) ->

    subrange<ranges::iterator_t<R>, ranges::sentinel_t<R>,

             (ranges::sized_range<R> ||

              std::sized_sentinel_for<ranges::sentinel_t<R>,

              ranges::iterator_t<R>>) ?



             ranges::subrange_kind::sized : ranges::subrange_kind::unsized>;

 (3) 

 (since C++20) 





 template< ranges::borrowed_range<R> >

subrange(R&&, /*make-unsigned-like-t*/<ranges::range_difference_t<R>>) ->

    subrange<ranges::iterator_t<R>, ranges::sentinel_t<R>,



             ranges::subrange_kind::sized>;

 (4) 

 (since C++20) 







These deduction guides are provided for std::ranges::subrange.



1) Deduces the template arguments from the type of iterator and sentinel. The subrange is sized if std::sized_sentinel_for<S, I> is satisfied, as determined by the default template argument.

2) Deduces the template arguments from the type of iterator and sentinel, while the size of range is specified. The subrange is always sized.

3) Deduces the template arguments from the type of range. The subrange is sized if the size can be obtained from the range or its iterator and sentinel.

4) Deduces the template arguments from the type of range, while the size of range is specified. The subrange is always sized.

For the definition of /* make-unsigned-like-t */, see make-unsigned-like-t ﻿.



[edit] Notes

While constructing the subrange object,



 for (1,2), the behavior is undefined if the iterator-sentinel pair does not denote a valid range,

 for (2,4), the behavior is undefined if the given size is not equal to the size of the range.



[edit] Example

This section is incompleteReason: no example 

[edit] Defect reports

The following behavior-changing defect reports were applied retroactively to previously published C++ standards.







DR



Applied to



Behavior as published



Correct behavior





LWG 3404



C++20



meaningless deduction guides from pair-like types were provided



removed







 





                    