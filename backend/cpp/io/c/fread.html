std::fread









From cppreference.com





[edit] Input/output library

I/O manipulators

Print functions (C++23)

C-style I/O

Buffers

basic_streambuf

basic_filebuf

basic_stringbuf

basic_spanbuf(C++23)

strstreambuf(C++98/26*)

basic_syncbuf(C++20)

Streams

Abstractions

ios_base

basic_ios

basic_istream

basic_ostream

basic_iostream

File I/O

basic_ifstream

basic_ofstream

basic_fstream

String I/O

basic_istringstream

basic_ostringstream

basic_stringstream

Array I/O

basic_ispanstream(C++23)

basic_ospanstream(C++23)

basic_spanstream(C++23)

istrstream(C++98/26*)

ostrstream(C++98/26*)

strstream(C++98/26*)

Synchronized Output

basic_osyncstream(C++20)

Types

streamoff

streamsize

fpos

Error category interface

iostream_category(C++11)

io_errc(C++11)

[edit] C-style I/O

Types and objects



FILE

fpos_t







stdinstdoutstderr



Functions



File access



fopen

freopen

fclose

fflush



fwide

setbuf

setvbuf







Direct input/output



fread



fwrite



Unformatted input/output



fgetcgetc

fgets

fputcputc

fputs

getchar

gets(until C++14)

putchar

puts

ungetc



fgetwcgetwc

fgetws

fputwcputwc

fputws

getwchar

putwchar

ungetwc











Formatted input



scanffscanfsscanf

vscanfvfscanfvsscanf(C++11)(C++11)(C++11)    



wscanffwscanfswscanf

vwscanfvfwscanfvswscanf(C++11)(C++11)(C++11)    





Formatted output



printffprintfsprintfsnprintf(C++11)

vprintfvfprintfvsprintfvsnprintf(C++11)    



wprintffwprintfswprintf

vwprintfvfwprintfvswprintf



File positioning

ftell

fgetpos

fseek

fsetpos

rewind

Error handling

clearerr

feof

ferror

perror

Operations on files

remove

rename

tmpfile

tmpnam



[edit] 





 Defined in header <cstdio>











 std::size_t fread( void* buffer, std::size_t size, std::size_t count, std::FILE* stream );

 

 







Reads up to count objects into the array buffer from the given input stream stream as if by calling std::fgetc size times for each object, and storing the results, in the order obtained, into the successive positions of buffer, which is reinterpreted as an array of unsigned char. The file position indicator for the stream is advanced by the number of characters read.

If the objects are not TriviallyCopyable, the behavior is undefined.

If an error occurs, the resulting value of the file position indicator for the stream is

indeterminate. If a partial element is read, its value is indeterminate.



Contents



1 Parameters

2 Return value

3 Example

4 See also





[edit] Parameters





 buffer



 -



 pointer to the first object in the array to be read





 size



 -



 size of each object in bytes





 count



 -



 the number of the objects to be read





 stream



 -



 input file stream to read from



[edit] Return value

Number of objects read successfully, which may be less than count if an error or end-of-file condition occurs.

If size or count is zero, fread returns zero and performs no other action.

fread does not distinguish between end-of-file and error, and callers must use std::feof and std::ferror to determine which occurred.



[edit] Example

Run this code

#include <cstddef>

#include <cstdio>

#include <fstream>

#include <iomanip>

#include <iostream>

#include <vector>

 

int main()

{

    // Prepare file

    std::ofstream("test.txt") << 1 << ' ' << 2 << '\n';

    std::FILE* f = std::fopen("test.txt", "r");

 

    std::vector<char> buf(4); // char is trivially copyable

    const std::size_t n = std::fread(&buf[0], sizeof buf[0], buf.size(), f);

 

    std::cout << "Read " << n << " object" << (n > 1 ? "s" : "") << ": "

              << std::hex << std::uppercase << std::setfill('0');

    for (char n : buf)

        std::cout << "0x" << std::setw(2) << static_cast<short>(n) << ' ';

    std::cout << '\n';

 

    std::vector<std::string> buf2; // string is not trivially copyable

//  This would result in undefined behavior:

//  std::fread(&buf2[0], sizeof buf2[0], buf2.size(), f);

}

Possible output:



Read 4 objects: 0x31 0x20 0x32 0x0A



[edit] See also





  scanffscanfsscanf



  reads formatted input from stdin, a file stream or a buffer  (function) [edit]





  fgets



  gets a character string from a file stream  (function) [edit]





  fwrite



  writes to a file  (function) [edit]





 C documentation for fread









 





                    