std::basic_ospanstream[edit] Input/output library

I/O manipulators

Print functions (C++23)

C-style I/O

Buffers

basic_streambuf

basic_filebuf

basic_stringbuf

basic_spanbuf(C++23)

strstreambuf(C++98/26*)

basic_syncbuf(C++20)

Streams

Abstractions

ios_base

basic_ios

basic_istream

basic_ostream

basic_iostream

File I/O

basic_ifstream

basic_ofstream

basic_fstream

String I/O

basic_istringstream

basic_ostringstream

basic_stringstream

Array I/O

basic_ispanstream(C++23)

basic_ospanstream(C++23)

basic_spanstream(C++23)

istrstream(C++98/26*)

ostrstream(C++98/26*)

strstream(C++98/26*)

Synchronized Output

basic_osyncstream(C++20)

Types

streamoff

streamsize

fpos

Error category interface

iostream_category(C++11)

io_errc(C++11)

[edit] std::basic_ospanstream

Member functions

basic_ospanstream::basic_ospanstream

basic_ospanstream::operator=

basic_ospanstream::swap

basic_ospanstream::rdbuf

Underlying buffer operations

basic_ospanstream::span

Non-member functions

swap(std::basic_ospanstream)

[edit] 





 std::span<CharT> span() const noexcept;

 (1) 

 (since C++23) 





 void span( std::span<CharT> s ) noexcept;

 (2) 

 (since C++23) 







1) Gets a span referencing the written area if std::ios_base::out is set in the open mode of the wrapped std::basic_spanbuf, or a span referencing the underlying buffer otherwise.

2) Makes the wrapped std::basic_spanbuf perform I/O on the buffer referenced by s.

Contents



1 Parameters

2 Return value

3 Example

4 See also





[edit] Parameters





 s



 -



 std::span referencing the storage to be use as the new underlying buffer of stream



[edit] Return value

1) A std::span referencing the underlying buffer or written area, depending on the open mode of the wrapped std::basic_spanbuf.

2) (none)

[edit] Example

Run this code

#include <cassert>

#include <iostream>

#include <span>

#include <spanstream>

 

int main()

{

    char out_buf[16];

    std::ospanstream ost{std::span<char>{out_buf}};

    ost << "C++" << ' ' << 23 << '\0'; // note explicit null-termination

    auto sp = ost.span();

    assert(

        sp[0] == 'C' && sp[1] == '+' && sp[2] == '+' &&

        sp[3] == ' ' && sp[4] == '2' && sp[5] == '3' &&

        sp[6] == '\0'

    );

    std::cout << "sp.data(): [" << sp.data() << "]\n";

    std::cout << "out_buf: [" << out_buf << "]\n";

    // spanstream uses out_buf as internal storage, no allocations

    assert(static_cast<char*>(out_buf) == sp.data());

 

    const char in_buf[] = "X Y 42";

    std::ispanstream ist{std::span<const char>{in_buf}};

    assert(static_cast<const char*>(in_buf) == ist.span().data());

    char c;

    ist >> c;

    assert(c == 'X');

    ist >> c;

    assert(c == 'Y');

    int i;

    ist >> i;

    assert(i == 42);

    ist >> i; // buffer is exhausted

    assert(!ist);

}

Output:



sp.data(): [C++ 23]

out_buf: [C++ 23]



[edit] See also





  span



  obtains or initializes an underlying buffer according to mode  (public member function of std::basic_spanbuf<CharT,Traits>) [edit]









 





                    