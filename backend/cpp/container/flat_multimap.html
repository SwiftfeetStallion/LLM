std::flat_multimap









From cppreference.com





[edit] Containers library

node-handle(C++17)

Sequence

array(C++11)

vector

vector<bool>

inplace_vector(C++26)

hive(C++26)

deque

forward_list(C++11)

list

Associative

set

multiset

map

multimap

Unordered associative

unordered_set(C++11)

unordered_multiset(C++11)

unordered_map(C++11)

unordered_multimap(C++11)

Adaptors

stack

queue

priority_queue

flat_set(C++23)

flat_multiset(C++23)

flat_map(C++23)

flat_multimap(C++23)

Views

span(C++20)

mdspan(C++23)

Tables

Iterator invalidation

Member function table

Non-member function table

[edit] std::flat_multimap

Member types

Member functions





flat_multimap::flat_multimap  

flat_multimap::operator=

Modifiers

flat_multimap::clear

flat_multimap::erase

flat_multimap::swap

flat_multimap::extract

flat_multimap::replace

flat_multimap::insert

flat_multimap::insert_range

flat_multimap::emplace

flat_multimap::emplace_hint

Lookup

flat_multimap::count

flat_multimap::find

flat_multimap::contains

flat_multimap::equal_range

flat_multimap::lower_bound

flat_multimap::upper_bound



Iterators

flat_multimap::beginflat_multimap::cbegin

flat_multimap::endflat_multimap::cend

flat_multimap::rbeginflat_multimap::crbegin

flat_multimap::rendflat_multimap::crend

Capacity

flat_multimap::size

flat_multimap::max_size

flat_multimap::empty

Observers

flat_multimap::key_comp

flat_multimap::keys

flat_multimap::value_comp

flat_multimap::values





Non-member functions





swap(std::flat_multimap)

erase_if(std::flat_multimap)   



operator==operator<=>





Helper classes





uses_allocator<std::flat_multimap>





Tags





sorted_equivalent        



sorted_equivalent_t





Deduction guides

[edit] 





 Defined in header <flat_map>











 template<

    class Key,

    class T,

    class Compare = std::less<Key>,

    class KeyContainer = std::vector<Key>,

    class MappedContainer = std::vector<T>



> class flat_multimap;

 

 (since C++23) 







The flat multimap is a container adaptor that gives the functionality of an associative container that contains key-value pairs, while permitting multiple entries with the same key value. Keys are sorted by using the comparison function Compare.

The class template flat_multimap acts as a wrapper to the two underlying containers, passed as objects of type KeyContainer and MappedContainer respectively. The first container is sorted, and for each key its corresponding value is in the second container at the same index (offset). The number of elements in both containers is the same.

Everywhere the standard library uses the Compare requirements, uniqueness is determined by using the equivalence relation. Informally, two objects a and b are considered equivalent if neither compares less than the other: !comp(a, b) && !comp(b, a).



std::flat_multimap meets the requirements of Container, ReversibleContainer, optional container requirements, and all requirements of AssociativeContainer (including logarithmic search complexity), except that:



 requirements related to nodes are not applicable,

 iterator invalidation requirements differ, 

 the complexity of insertion and erasure operations is linear.



A flat multimap supports most of AssociativeContainer's operations that use equal keys.







All member functions of std::flat_multimap are constexpr: it is possible to create and use std::flat_multimap objects in the evaluation of a constant expression.However, std::flat_multimap objects generally cannot be constexpr, because any dynamically allocated storage must be released in the same evaluation of constant expression.



(since C++26)



Contents



1 Iterator invalidation

2 Template parameters

3 Member types

4 Member classes

5 Member objects

6 Member functions



6.1 Iterators

6.2 Capacity

6.3 Modifiers

6.4 Lookup

6.5 Observers





7 Non-member functions

8 Helper classes

9 Tags

10 Deduction guides

11 Notes

12 Example

13 See also





[edit] Iterator invalidation

This section is incomplete 

[edit] Template parameters





 Key



 -



 The type of the keys. The program is ill-formed if Key is not the same type as KeyContainer::value_type.





 T



 -



 The type of mapped values. The program is ill-formed if T is not the same type as MappedContainer::value_type.





 Compare



 -



 A Compare type providing a strict weak ordering.





 KeyContainerMappedContainer



 -



 The types of the underlying SequenceContainer to store keys and mapped values correspondingly. The iterators of such containers should satisfy LegacyRandomAccessIterator or model random_access_iterator. Invocations of their member functions size and max_size should not exit via an exception.

The standard containers std::vector and std::deque satisfy these requirements.





[edit] Member types





 Type



 Definition





 key_container_type



 KeyContainer[edit]





 mapped_container_type



 MappedContainer[edit]





 key_type



 Key[edit]





 mapped_type



 T[edit]





 value_type



 std::pair<key_type, mapped_type>[edit]





 key_compare



 Compare[edit]





 reference



 std::pair<const key_type&, mapped_type&>[edit]





 const_reference



 std::pair<const key_type&, const mapped_type&>[edit]





 size_type



 std::size_t[edit]





 difference_type



 std::ptrdiff_t[edit]





 iterator



 implementation-defined LegacyInputIterator, ConstexprIterator(since C++26) and random_access_iterator to value_type[edit]





 const_iterator



 implementation-defined LegacyInputIterator, ConstexprIterator(since C++26) and random_access_iterator to const value_type[edit]





 reverse_iterator



 std::reverse_iterator<iterator>[edit]





 const_reverse_iterator



 std::reverse_iterator<const_iterator>[edit]





 containers



 type describing the underlying containers

struct containers

{

    key_container_type keys;

    mapped_container_type values;

};[edit]







[edit] Member classes





  value_compare



  compares objects of type value_type  (class) [edit]





[edit] Member objects





 Member



 Description





 containers c (private)



 the adapted containers(exposition-only member object*)





 key_compare compare (private)



 the comparison function object(exposition-only member object*)





[edit] Member functions





  (constructor)



  constructs the flat_multimap  (public member function) [edit]





 (destructor)(implicitly declared)



  destroys every element of the container adaptor  (public member function)





  operator=



  assigns values to the container adaptor  (public member function) [edit]





   Iterators 





  begincbegin



  returns an iterator to the beginning  (public member function) [edit]





  endcend



  returns an iterator to the end  (public member function) [edit]





  rbegincrbegin



  returns a reverse iterator to the beginning  (public member function) [edit]





  rendcrend



  returns a reverse iterator to the end  (public member function) [edit]





   Capacity 





  empty



  checks whether the container adaptor is empty  (public member function) [edit]





  size



  returns the number of elements  (public member function) [edit]





  max_size



  returns the maximum possible number of elements  (public member function) [edit]





   Modifiers 





  emplace



  constructs element in-place   (public member function) [edit]





  emplace_hint



  constructs elements in-place using a hint  (public member function) [edit]





  insert



  inserts elements   (public member function) [edit]





  insert_range



  inserts a range of elements  (public member function) [edit]





  extract



  extracts the underlying containers  (public member function) [edit]





  replace



  replaces the underlying containers  (public member function) [edit]





  erase



  erases elements  (public member function) [edit]





  swap



  swaps the contents  (public member function) [edit]





  clear



  clears the contents  (public member function) [edit]





   Lookup 





  find



  finds element with specific key  (public member function) [edit]





  count



  returns the number of elements matching specific key  (public member function) [edit]





  contains



  checks if the container contains element with specific key  (public member function) [edit]





  lower_bound



  returns an iterator to the first element not less than the given key  (public member function) [edit]





  upper_bound



  returns an iterator to the first element greater than the given key  (public member function) [edit]





  equal_range



  returns range of elements matching a specific key  (public member function) [edit]





   Observers 





  key_comp



  returns the function that compares keys  (public member function) [edit]





  value_comp



  returns the function that compares keys in objects of type value_type  (public member function) [edit]





  keys



  direct access to the underlying keys container  (public member function) [edit]





  values



  direct access to the underlying values container  (public member function) [edit]





[edit] Non-member functions





  operator==operator<=>(C++23)



  lexicographically compares the values of two flat_multimaps  (function template) [edit]





  std::swap(std::flat_multimap)(C++23)



  specializes the std::swap algorithm  (function template) [edit]





  erase_if(std::flat_multimap)(C++23)



  erases all elements satisfying specific criteria  (function template) [edit]





[edit] Helper classes





  std::uses_allocator<std::flat_multimap>(C++23)



  specializes the std::uses_allocator type trait  (class template specialization) [edit]





[edit] Tags





  sorted_equivalentsorted_equivalent_t(C++23)



 indicates that elements of a range are sorted (uniqueness is not required)(tag)[edit]





[edit] Deduction guides

[edit] Notes

The member types iterator and const_iterator may be aliases to the same type. This means defining a pair of function overloads using the two types as parameter types may violate the One Definition Rule. Since iterator is convertible to const_iterator, a single function with a const_iterator as parameter type will work instead.







Feature-test macro



Value



Std



Feature





__cpp_lib_flat_map

202207L

(C++23)

std::flat_map and std::flat_multimap





__cpp_lib_constexpr_flat_map

202502L

(C++26)

constexpr std::flat_multimap



[edit] Example

This section is incompleteReason: no example 

[edit] See also





  flat_map(C++23)



  adapts two containers to provide a collection of key-value pairs, sorted by unique keys  (class template) [edit]





  multimap



  collection of key-value pairs, sorted by keys  (class template) [edit]





  unordered_multimap(C++11)



  collection of key-value pairs, hashed by keys  (class template) [edit]









 





                    