std::wstring_convert[edit]Â Text processing library

Localization library

Regular expressions library (C++11)

Formatting library (C++20)

Null-terminated sequence utilities

Byte strings

Multibyte strings

Wide strings

Primitive numeric conversions



to_chars(C++17)

to_chars_result(C++17)

from_chars(C++17)

from_chars_result(C++17)

chars_format(C++17)



Text encoding identifications



text_encoding(C++26)



[edit]Â Localization library



Locales and facetsÂ Â 

Locales

has_facet

use_facet

locale

Facet categorybase classes

ctype_base

codecvt_base

messages_base

time_base

money_base

ctype facets

ctype

ctype<char>

ctype_byname

codecvt

codecvt_byname

numeric facets

num_get

num_put

numpunct

numpunct_byname

collate facets

collate

collate_byname

time facets

time_get

time_put

time_get_byname

time_put_byname



monetary facets

money_get

money_put

moneypunct

moneypunct_byname

messages facets

messages

messages_byname

Character classification and conversion

Character classification





isspaceÂ Â 

iscntrl

isupper



islowerÂ Â 

isalpha

ispunct



isdigitÂ Â 

isxdigit

isalnum



isblank(C++11)

isprint

isgraph





Character conversions





toupperÂ Â 



tolower





String and stream conversions

wstring_convert(C++11/17/26*)

wbuffer_convert(C++11/17/26*)

Unicode conversion facets

codecvt_utf8(C++11/17/26*)

codecvt_utf16(C++11/17/26*)

codecvt_utf8_utf16(C++11/17/26*)

codecvt_mode(C++11/17/26*)

C library locales





LC_ALLLC_COLLATELC_CTYPELC_MONETARYLC_NUMERICLC_TIMEÂ Â 



setlocale

localeconv

lconv



















[edit]Â std::wstring_convert

Member functions

wstring_convert::wstring_convert

wstring_convert::~wstring_convert

wstring_convert::from_bytes

wstring_convert::to_bytes

wstring_convert::converted

wstring_convert::state

[edit]Â 





 Defined in header <locale>











 std::size_t converted() const noexcept;

 

 







Returns the number of source characters that were successfully processed by the most recent from_bytes() or to_bytes().



Contents



1 Return value

2 Example

3 Defect reports

4 See also





[edit] Return value

cvtcount



[edit] Example

Run this code

#include <codecvt>

#include <iostream>

#include <locale>

#include <string>

Â 

int main()

{

    std::string utf8 = "z\u00df\u6c34\U0001d10b"; // or u8"zÃŸæ°´ğ„‹"

                   // or "\x7a\xc3\x9f\xe6\xb0\xb4\xf0\x9d\x84\x8b";

    std::cout << "original UTF-8 string size: " << utf8.size() << '\n';

Â 

    // the UTF-8 - UTF-32 standard conversion facet

    std::wstring_convert<std::codecvt_utf8<char32_t>, char32_t> cvt;

Â 

    // UTF-8 to UTF-32

    std::u32string utf32 = cvt.from_bytes(utf8);

    std::cout << "UTF-32 string size: " << utf32.size() << '\n';

    std::cout << "converted() == " << cvt.converted() << '\n';

Â 

    // UTF-32 to UTF-8

    utf8 = cvt.to_bytes(utf32);

    std::cout << "new UTF-8 string size: " << utf8.size() << '\n';

    std::cout << "converted() == " << cvt.converted() << '\n';

}

Output:



original UTF-8 string size: 10

UTF-32 string size: 4

converted() == 10

new UTF-8 string size: 10

converted() == 4



[edit] Defect reports

The following behavior-changing defect reports were applied retroactively to previously published C++ standards.







DR



Applied to



Behavior as published



Correct behavior





LWG 2174



C++11



wstring_convert::converted was not required to be noexcept



required



[edit] See also





  to_bytes



  converts a wide string into a byte string  (public member function) [edit]





  from_bytes



  converts a byte string into a wide string  (public member function) [edit]









 





                    